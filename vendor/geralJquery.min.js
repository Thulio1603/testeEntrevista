$(document).ready(function(){
    $("#containerPesquisar").hide();
    $("#containerInserir").hide();
    $("#containerAlterar").hide();
    $("#containerDeletar").hide();
    $("#table").hide();
   $("#pesquisar").click(function(){
      $("#bemvindo").hide();
      $("#containerAlterar").hide();
      $("#containerInserir").hide();  
      $("#containerDeletar").hide(); 
      $("#containerPesquisar").show(); 
   });
   $("#inserir").click(function(){
      $("#bemvindo").hide();  
      $("#containerAlterar").hide();
      $("#containerInserir").show();  
      $("#containerDeletar").hide(); 
      $("#containerPesquisar").hide(); 
   });
   $("#alterar").click(function(){
      $("#bemvindo").hide();  
      $("#containerAlterar").show();
      $("#containerInserir").hide();  
      $("#containerDeletar").hide(); 
      $("#containerPesquisar").hide(); 
   });
   $("#deletar").click(function(){
      $("#bemvindo").hide();  
      $("#containerAlterar").hide();
      $("#containerInserir").hide();  
      $("#containerDeletar").show(); 
      $("#containerPesquisar").hide(); 
   });
   
   $("#buttonPesquisa").click(function(){
     if(($("#nomeP").val() != null || $("#emailP").val() != null) && ($("#nomeP").val() != '' || $("#emailP").val() != '') ){
        $.ajax({
            url : "../controller/usuarioController.php",
            type : 'post',
            data : {
                tipo: 'pesquisa',
                nome : $("#nomeP").val(),
                email : $("#emailP").val()
            },
            success: function(data) {
                if(data != 0){
                    console.log(data);
                    data = data.split('/');
                    console.log(data);
                    var nomes = data[0];
                    var emails = data[1];
                    nomes = nomes.split(',');
                    emails = emails.split(',');
                    
                    for(var i = 0; i <= nomes.length; i++){
                        $("#linhaTable"+i).remove();
                        if(nomes[i] != '' && nomes[i] != null && nomes[i] != ' '){
                            $("#table").append("<tr id='linhaTable"+i+"'><td>"+nomes[i]+"</td> <td>"+emails[i]+"</td> </tr");
                        }
                    }
                    $("#table").show();
                }else{
                    alert("Não obtivemos nenhum retorno");
                }
            },
        })
    }else{
        alert('Preencha ao menos um campo para pesquisar');
    }
   });
   $("#buttonInserir").click(function(){
    if(($("#nomeI").val() != null && $("#emailI").val() != null && $("#senhaI").val() != null) && ($("#nomeI").val() != '' && $("#emailI").val() != '' && $("#senhaI").val() != '') ){
        $.ajax({
            url : "../controller/usuarioController.php",
            type : 'post',
            data : {
                tipo: 'insercao',
                nome : $("#nomeI").val(),
                email : $("#emailI").val(),
                senha: $("#senhaI").val()
            },
            success: function(data) {
                console.log(data);
                if(data == 1){
                    alert('Inserido com sucesso');
                }else if(data == 0){
                    alert('Não foi possível realizar a ação');
                }
            },
        })
    }else{
        alert('nenhum campo pode ficar vazio');
    }
   });
   $("#buttonAlterar").click(function(){
    if(($("#nomeA").val() != null && $("#emailA").val() != null && $("#senhaA").val() != null) && ($("#nomeA").val() != '' && $("#emailA").val() != '' && $("#senhaA").val() != '') ){
        $.ajax({
            url : "../controller/usuarioController.php",
            type : 'post',
            data : {
                tipo: 'alteracao',
                nome : $("#nomeA").val(),
                email : $("#emailA").val(),
                senha: $("#senhaA").val(),
                alterado: $("#nomePesquisa").val(),
            },
            success: function(data) {
                console.log(data);
                if(data == 1){
                    alert('Alterado com sucesso');
                }else if(data == 0){
                    alert('Não foi possível realizar a ação');
                }
            },
        })
    }else{
        alert('nenhum campo pode ficar vazio');
    }
   });
   $("#buttonDeletar").click(function(){
    if(($("#nomeD").val() != null) && ($("#nomeD").val() != '') ){
        $.ajax({
            url : "../controller/usuarioController.php",
            type : 'post',
            data : {
                tipo: 'delecao',
                nome : $("#nomeD").val(),
                email : $("#emailD").val()
            },
            success: function(data) {
                console.log(data);
                if(data == 1){
                    alert('Deletado com sucesso');
                }else if(data == 0){
                    alert('Não foi possível realizar a ação');
                }
            },
        })
    }else{
        alert('nenhum campo pode ficar vazio');
    }
   });
});
